<!DOCTYPE html>
<html>
<head>
    <title>Virtue / Vice</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../css/list.css">
    <script src="https://cdn.firebase.com/js/client/2.3.1/firebase.js"></script>
        <script> 
        windows.onload = function(){

        var list = document.getElementById("awards");
        var li = document.createElement("li");
        var value = document.createTextNode("hello world");
            li.appendChild(value);
            list.appendChild(li);

        }
        
        
    </script>
</head>
<body>
    <section>
        <h1>Habit List</h1>
        <ul id="habit-list">
            <template id = "habits">
            <li>
                <input type="hidden" name="habit-id">
                <ul class="habit-info">
                    <li><div class="habit-name">Sleep 8 hours</div>
                        <button type="button" class="op op-del" title="delete habit">
                        <img src="../img/delete.svg" alt="Del">
                        </button>
                    
                        <button type="button" class="op op-edit" onclick="location.href='edit.html'" title="edit habit">
                        <img src="../img/edit.svg" alt="Edit">
                        </button>
                    </li>
                    <li><img class="habit-icon" src="../img/sleep.jpg" alt="habit icon"></li>
                    <li><p class="habit-desc">enter optional description here enter optional description here enter optional description here enter optional description here</p></li>
                </ul>
                <div class="message">
                    <span class="message-total">
                        <strong>2</strong> days in a row! Best Record: <strong>5</strong><br>
                       <progress class="habit-progress" max="100" value="0"></progress>
                    </span><br>
                    <span class="message-today">Completed <strong id="habitCounter">1</strong>/<strong id="habitStop">1</strong> for today!</span>
                </div>
                <div class="habit-op">
                    <button type="button" class="op op-done" title="done" value="0" data-count-stop="3">
                        <img src="../img/done.svg" alt="Done">
                    </button>
                </div>
            </li>
            </template>
            <li>
                <input type="hidden" name="habit-id">
                <ul class="habit-info">
                    <li>
                        <div class="habit-name">Eat Healthy</div>
                        <button type="button" class="op op-del" title="delete habit">
                            <img src="../img/delete.svg" alt="Del">
                        </button>
                        <button type="button" class="op op-edit" onclick="location.href='edit.html'" title="edit habit">
                            <img src="../img/edit.svg" alt="Edit">
                        </button>
                    </li>
                    <li><img class="habit-icon" src="../img/salad.jpg" alt="habit icon"></li>
                </ul>
                <div class="message">
                    <span class="message-total">
                        <strong>10</strong> days in a row! Best Record: <strong>20</strong><br>
                        <svg height="25" width="150">
                            <line x1="0" y1="0" x2="75" y2="0" style="stroke:rgba(65, 131, 215, 0.8);stroke-width:25" />
                            <line x1="75" y1="0" x2="150" y2="0" style="stroke:rgba(171,171,171,0.6);stroke-width:25" />
                        </svg>
                    </span><br>
                    <span class="message-today">Completed <strong id="habitCounter">1</strong>/<strong id="habitStop">3</strong> for today!</span>
                </div>
                <div class="habit-op">
                    <button type="button" class="op op-done" title="done" value="0" data-count-stop="10">
                        <img src="../img/done.svg" alt="Done">
                    </button>
                </div>
            </li>
            
            <li>
                <input type="hidden" name="habit-id">
                <ul class="habit-info">
                    <li><div class="habit-name">Exercise 30 minutes</div>
                        <button type="button" class="op op-del" title="delete habit"><img src="../img/delete.svg" alt="Del">
                        </button>
                        <button type="button" class="op op-edit" onclick="location.href='edit.html'" title="edit habit">
                        <img src="../img/edit.svg" alt="Edit">
                    </button>
                    </li>
                    <li><img class="habit-icon" src="../img/run.jpg" alt="habit icon"></li>
                </ul>
                <div class="message">
                    <span class="message-total">
                        <strong>48</strong> days in a row! Best Record: <strong>60</strong><br>
                        <svg height="25" width="150">
                            <line x1="0" y1="0" x2="120" y2="0" style="stroke:rgba(65, 131, 215, 0.8);stroke-width:25" />
                            <line x1="120" y1="0" x2="150" y2="0" style="stroke:rgba(171,171,171,0.6);stroke-width:25" />
                        </svg>
                    </span><br>
                    <span class="message-today">Completed <strong id="habitCounter">1</strong>/<strong id="habitStop">2</strong> for today!</span>
                </div>
                <div class="habit-op">
                    <button type="button" class="op op-done" title="done" value="0" data-count-stop="5">
                        <img src="../img/done.svg" alt="Done">
                    </button>
                </div>
            </li>

        </ul>
    </section>

    <button type="button" id="addHabit" onclick="location.href='add.html'" title="add habit">+</button>
    
    <script src="../js/list.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

    <script> 
        //to handle habit completed button clicks
        $(document).ready(function(){
            $('.op-done').bind('click', function(e) {
                var counter = $(this).val(); 
                var countstop = $(this).data('countStop');
                var newCount = parseInt(counter) + 1;
               
                $(this).val(newCount);
                
                //display message
                var msgElement = $(this.parentNode.parentNode).find(".message");
                var msgToday = msgElement.find(".message-today");
                
                 if (newCount >= countstop) {
                    //message if habit is completed
                    msgToday.html("Completed Habit!");
                }
                else {
                    var habitCount = msgElement.find("#habitCounter");
                    habitCount.html(newCount);
                    var habitStop = msgElement.find("#habitStop");
                    habitStop.html(countstop);
                }
                
                msgElement.css("visibility","visible");
            });
                                 
        });
    </script>

    <script>   
        // delete habit function
        $(document).ready(function() {
            $('.op-del').on('click', function() {
                var x = confirm("Are you sure you want to delete this habit?");
                if (x) {
                    var child = $(this.parentNode.parentNode.parentNode)
                    child.addClass(' animated fadeOutLeft');
                    child.one('webkitAnimationEnd', function(event) {
                        $(this).remove(); 
                    });                
                }
                else
                    return false;
            });
            
        });
    </script>
    <script>
        window.onload = function()
        {

        var habitList = document.getElementById("habit-list");
        var habitListItem = document.getElementById("habits").content.cloneNode(true);
        habitList.appendChild(habitListItem);

        //document.getElementById(".habit-name").innerText = "jlj";

            
        }
    </script>
    

</body>
</html>